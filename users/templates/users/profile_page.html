{% extends "main.html" %}
{% load static %}
{% block content %}

<style>
    .profile-container{
        display: grid;
        grid-template-columns:1fr 5fr  ;
    }

    .profile-content{
        display: grid;
        grid-template-rows:2fr 90px 60px 6fr  ;
    }


    .profile-thumbnail_picture{
        height: 100%;
        width: 100%;
        object-fit: contain;
        
        
    }

    .profile-image{
        width: 80%;
        height: 80%;
        max-width: 80px;
        max-height: 100px;
        border-radius: 100%;
        
    }

    .subscribe{
        object-position: right;
        background-color: rgb(229, 8, 8);
        color: white;
        border-radius: 3px;
        border-width: 0px;
        padding: 8px 13px;
        font-weight: bold;
        font-size: smaller;
    }

    .subscribed{
        object-position: right;
        background-color: rgb(239, 239, 239);
        color: rgb(96, 96, 96);
        border-radius: 3px;
        border-width: 0px;
        padding: 8px 13px;
        font-weight: bold;
        font-size: smaller;
    }

    .profile-information{
        margin-bottom: 10px;
        margin-top: 10px;
        display: grid;
        grid-template-columns: 1fr 7fr 2fr;
        align-items: center;
    }

    .profile-options{
        display: flex;
        
        align-items: center;

    }

    .profile-video-thumbnail{
        max-width: 100%;
        max-height: 125px;
        object-fit: contain;
        margin-bottom: 10px;
    }

    .profile-videos{
        display: grid;
        grid-template-columns: 1fr 1fr 1fr 1fr;
        column-gap: 16px;
        row-gap: 30px;
    }

    .profile-name{
        display: inline; 
        margin-left: 25px;
        font-size: 25px;
        font-weight: bold;
    }

    .count_followers{
        font-size: 13px;
        margin-left: 25px;
        color: rgb(96, 96, 96);
    }
</style>



<div class="profile-container">
    {% include 'menu.html' %}

    <div class="profile-content">

        <div >
            <!-- profile thumbnail picture -->
            <img class="profile-thumbnail_picture" src="{{ profile.profile_thumbnail.url }}" alt="">
        </div>
        
        <div class="profile-information">
            <!-- profile picture + subscribers and buttons -->

            <div>
                <img class="profile-image" src="{{ profile.profile_image.url }}" alt="">
            </div>

            <div>
                <p class="profile-name">{{ profile.channel_name }}</p>
                {% if profile.count_followers  == 0 %}
                    <p class="count_followers">No subscribers</p>
                {% else %}
                    <p class="count_followers">{{ profile.count_followers }} subscriber{{ profile.count_followers|pluralize:"s" }}</p>
                {% endif %}
            </div>

            <div>
                {% if request.user in profile.followers.all %}
                    <a href="{% url 'unsubscribe' profile.id %}?next={{request.path}}" ><button class="subscribed">SUBSCRIBED</button></a>
                    <!-- TODO<img src="{% static 'images/icons/notifications.svg' %}" alt=""> -->
                    
                {% else %}
                    <a href="{% url 'subscribe' profile.id %}?next={{request.path}}"><button class="subscribe">SUBSCRIBE</button></a>
                {% endif %}
            </div>
        
        </div>
        <div class="profile-options">
            <!-- options to what you want to see -->
            
            <h3>Home</h3>
        
        </div>
        
        <div class="profile-videos">
            <!-- videos -->
            {% for video in videos %}
            <div >
                <div>
                    <a href="{% url 'video' pk=video.id %}">
                        <img class="profile-video-thumbnail" src="{{ video.thumbnail.url }}" alt="">
                    </a>
                </div>
                <div class="profile-video-info-container">
                    
            
                    <div class="video-info">
                        <a href="{% url 'video' pk=video.id %}">
                            <p class="video-title">{{ video.title }}</p>
                        </a>
            
                        <a href="{% url 'profile' video.owner.id %}">
                            <p class="video-author">{{ video.owner }}</p>
                        </a>
            
                        <a href="{% url 'video' pk=video.id %}">
                            <p class="video-stats">{{ video.views_count }} views &#183; {{ video.created|timesince}} ago</p>
                        </a>
                    </div>
            
                </div>
            
            </div>
            {% endfor %}
        
        </div>



    </div>


</div>


{% endblock content %}